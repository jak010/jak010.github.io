---
title: 내 코드가 그렇게 이상한가요
excerpt: '"내 코드가 그렇게 이상한가요"를 읽고 정리한 생각'
categories:
  - books
tags: []
permalink: /categories/books/
toc: true
toc_sticky: true
date: 2025-07-17
last_modified_at: 2025-07-17
---

# TL; DR;

> 이 노트는 "내 코드가 그렇게 이상한가요" 라는 책을 일으며 정리한 내용과 그에 대한 생각 및 지식을 정리하기 위해 작성된 노트입니다.
![URL](https://contents.kyobobook.co.kr/sih/fit-in/458x0/pdt/9788966263998.jpg)  


# CHAPTER  2 : 설계 첫걸음
>단계 : 입문 (p14 ~ p20)  
>제목 : 설계 첫걸음  
  내용 : 잘못된 구조를 개선하는 간단한 예를 통해서, 설계가 무엇을 의미하는지 다룹니다.  

## 2.1 의도를 분명하게 전달할 수 있는 이름 설계하기
- 짧은 이름은 구현은 빠를 수 있어도, 이해와 유지보수에 더 많은 시간이 든다.
- 전체 개발 시간 관점에서는, 명확한 이름이 오히려 효율적이다.  

## 2.2 목적별로 변수를 따로 만들어 사용하기
- 변수 재할당은 혼란을 유발한다.  
- 용도에 따라 새로운 변수를 만들어 사용하면 코드의 목적이 분명해진다.  

## 2.3 의미 있는 것을 모아 메서드로 만들기
- 계산 로직이 나열되면 파악이 어렵고, 값이 섞일 위험도 있다.  
- 메서드를 적절히 나누고 변수명을 신경 쓰는 것이 곧 설계이며, 유지보수성을 높인다.  

## 2.4 관련된 데이터와 로직을 클래스로 모으기
- 데이터와 해당 데이터를 다루는 메서드를 함께 묶으면 코드 탐색이 쉬워진다.  
- 잘 설계된 클래스는 유효하지 않은 값의 유입도 방지하며, 버그 발생 가능성을 줄인다. 


# CHAPTER 3 :  클래스 설계  
> 단계 : 실전  
> 제목 : 클래스 설계, 모든 것과 연결되는 설계 기반  
> 내용 : 이 책 전체의 기반이 되는 클래스와 객체 지향 설계의 기초를 다룹니다.  

**P.22**
- 클래스 기반이란 "데이터"와 "그 데이터를 조작하는 논리"를 클래스라는 기본 단위로 묶어서 정의해가며, 프로그램을 작성하는 방법입니다. 
- 이 장에서는 객체 지향 설계의 기본이라고 할 수 있는 클래스 설계의 기본을 설명합니다. 객체 지향 프로그래밍에서 클래스보다 작은 단위로는 조건 분기와 메서드 등이 있습니다.
	- 클래스 설계가 잘 잡혀 있어야, 유지보수와 변경이 쉬운 코드를 만들 수 있습니다.
- 이 장에서는 데이터 클래스를 예로 악마 퇴치의 기본이 되는 클래스 설계 방법을 설명합니다. 데이터 클래스 속에 숨어있는 악마들을 하나하나 퇴치해서 우아하고 성숙한 클래스를 만드는 방법을 살펴봅시다.

## 3.1 클래스 단위로 잘 동작하도록 설계하기  
- 클래스는 단독으로도 안전하게 작동할 수 있도록 설계해야 한다.
- 외부에서 복잡한 초기 설정 없이 사용할 수 있어야 하며, 내부 상태가 쉽게 망가지지 않도록 제한된 조작만 허용해야 한다.
#### 3.1.1 클래스 구성 요소  
좋은 클래스의 구성
- 인스턴스 변수
- 해당 변수를 안전하게 조작하는 메서드    

**데이터 클래스의 문제점**
- 인스턴스 변수만 존재하고, 로직은 다른 클래스에 분산됨  
    → 관련성 파악 어려움, 코드 중복, 초기화 누락 등 발생
- 초기화와 유효성 검사까지 외부 클래스에 의존  
    → 잘못된 값 유입 가능, 자기 방어 능력이 없음
    
**핵심 원칙**
- 클래스는 자신의 상태를 스스로 보호할 수 있어야 하며, 유효하지 않은 상태를 방지하는 책임을 가져야 한다.
#### 3.1.2 모든 클래스가 갖추어야 하는 자기 방어 임무  
- 클래스, 메서드, 모듈 등은 각각이 독립적으로 신뢰할 수 있는 품질을 갖춰야 한다.
- 외부 도움 없이는 사용할 수 없는 클래스는 미성숙한 설계다.
- 모든 클래스는 초기화, 유효성 검사, 상태 보호 기능을 스스로 갖춰야 한다.

## 3.2 성숙한 클래스로 성장시키는 설계 기법 
이 장에서는 금액을 나타내는 클래스를 예시로 설계 방법을 설명한다.
```java
import java.util.Currency

class Money {
	int amount;
	Currency currency;
}
```
### 3.2.1 생성자로 확실하게 정상적인 값 설정하기

**데이터 클래스와 초기화 문제**
- 데이터 클래스는 디폴트 생성자 이후 인스턴스 변수에 값을 따로 할당해 초기화한다.
- 이 방식은 객체가 '초기화되지 않 상태'로 존재할 수 있게 하며, 이를 **로우 데이터 객체(row data object)** 라고 한다
- 로우 데이터 객체를 방지하려면 **생성 시점에 인스턴스 변수가 모두 유효한 값으로 초기화**되도록 해야 한다.    

**생성자에서 초기화 구현**
- 인스턴스 변수를 모두 초기화하는 생성자를 구현하면, 객체 생성과 동시에 필드가 초기화된다.
- 예시: `Money` 클래스는 `amount`와 `currency`를 매개변수로 받아 초기화하도록 만든다.

**생성자에서 유효성 검사 추가**
```java
class Money {
	int amount;
	Currency currency;
	
	Money(int amount, Currency currency) {
		this.amount = amount;
		this.currency = currency;
	}
}
```
- 단순 초기화만으로는 부족하며, **매개변수의 유효성도 함께 검사**해야 한다.    
- 생성자 내부에서 조건에 따라 예외를 발생시켜 **잘못된 값의 유입을 차단**한다.

**가드(guard)의 개념과 장점**
```java
class Money {
	int amount;
	Currency currency;

	Money(int amount, Currency currency) {
		if (amount < 0) {
			throw new IllegalArgumentException("금액은 0 이상의 값을 지정해주세요.");
		}
		if (currency == null) {
			throw new NullPointerException("통화 단위를 지정해주세요");
		}
		this.amount = amount;
		this.currency = currency;
	}
}
```
- 메서드 시작 부분에서 유효하지 않은 조건을 먼저 검사해 즉시 반환하거나 예외를 던지는 방식을 **가드(guard)** 라고 한다.
- 가드를 사용하면 불필요한 처리를 줄이고, 이후 로직을 단순하고 명확하게 유지할 수 있다.    
- 생성자에서 가드를 활용하면 **잘못된 인스턴스가 생성되지 않도록 보장**할 수 있으며, 프로그램 전체의 안정성이 높아진다.